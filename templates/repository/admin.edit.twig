{% extends 'base.html.twig' %}
{% import "partials/macros.twig" as macros %}

{% set page_title = 'Edit Repository: ' ~ repository.name %}

{% block content %}
    <h2>Edit Repository</h2>

    <div class="form-wrapper">
        {% if errors %}
            <ul class="error-list">
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <form method="post">
            <ul class="form-fields">
                <li>
                    <label for="name">Name</label>
                    <input name="name" id="name" maxlength="64" required value="{{ form.name }}" class="text-input">
                </li>
                <li>
                    <label for="identifier">Identifier</label>
                    <small class="additional">This identifier is used to determine permissions. Modify with care.</small>
                    <input type="text" name="identifier" id="identifier" maxlength="24" required value="{{ form.identifier }}" class="text-input t50">
                </li>

                <li>
                    <p>Group</p>
                    <ul class="radio-grid--form">
                    {% for group in groups %}
                        {% set checked = '' %}
                        {% if form.group == group.id %}
                            {% set checked = ' checked="checked"' %}
                        {% endif %}

                        <li>
                            <input type="radio" name="group" id="group-{{ group.id }}" value="{{ group.id }}"{{ checked }}>
                            <label for="group-{{ group.id }}">{{ group.name }}</label>
                        </li>
                    {% endfor %}
                    </ul>
                </li>

                <li>
                    <h3 class="zeta label">Github Source</h3>
                    <a href="{{ githubRepo(repository.githubUser, repository.githubRepo) }}">{{ repository.githubUser }}/{{ repository.githubRepo }}</a>
                    {{ macros.icon('github') }}
                    <small class="additional">Please contact a HAL administrator to change this setting.</small>
                </li>

                <li>
                    <label for="notification_email">Notification E-mail Address</label>
                    <input type="email" name="notification_email" id="notification_email" maxlength="128" value="{{ form.notification_email }}" class="text-input">
                </li>
                <li>
                    <label for="eb_name">Amazon Elastic Beanstalk Application Name</label>
                    <input type="text" name="eb_name" id="eb_name" maxlength="255" value="{{ form.eb_name }}" class="text-input">
                    <small class="additional">Required to add EB deployments.</small>
                </li>
            </ul>

            <div>
                {# primary action #}
                <input class="btn" type="submit" value="Save">

                {# secondary actions #}
                <a class="secondary-action" href="{{ urlFor('repository', {id: repository.id}) }}">Cancel</a>
            </div>
        </form>
    </div>
{% endblock %}
