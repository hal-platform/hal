{% extends 'base.twig' %}

{% set page_title = 'Environment : ' ~ env.name %}

{% set isAdmin = isUserSuper(current_user) %}

{% block content %}
    <h1>Environment - <b>{{ env.name }}</b></h1>

    <div class="details-box">
        <dl class="split mbn">
            <dt class="split__title">Name</dt>
            <dd>{{ env.name }}</dd>

            <dt class="split__title">Is Production Environment?</dt>
            <dd>{{ env.isProduction ? 'Yes' : 'No' }}</dd>
        </dl>
    </div>

    <h3>Servers</h3>
    {% if servers %}
        <table class="table--spacing-medium table--striped" data-tablesaw-mode="stack">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                </tr>
            </thead>
            <tbody>
                {% for server in servers %}
                    <tr>
                        <td>
                            <a href="{{ uriFor('server', {'server': server.id}) }}">{{ server.formatPretty() }}</a>
                        </td>
                        <td>
                            {{ server.formatHumanType() }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>There are no servers associated with this environment.</p>
    {% endif %}

    {% if isAdmin and servers %}
        <p><b>Note:</b> All associated servers must be removed or transferred to remove this environment.</p>
    {% endif %}

    <ul class="button-list button-list--half">
        <li><a class="btn" href="{{ uriFor('environments') }}">Environments</a></li>
        {% if isAdmin %}
            <li><a class="btn btn--action" href="{{ uriFor('environment.edit', {'environment': env.id}) }}">Edit Environment</a></li>
            {% if not servers and isAdmin %}
                <li><a class="btn btn--destructive" href="{{ uriFor('environment.remove', {'environment': env.id}) }}">Remove Environment</a></li>
            {% endif %}
        {% endif %}
    </ul>

{% endblock %}
