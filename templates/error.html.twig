<!DOCTYPE html>

{% import _self as macros %}
{% set page_title = status == 404 ? 'Not Found' : 'Error' %}
{% set buster = application_sha[:4] ?: 'dev' ~ 'now'|date('U') %}

<html class="no-js" id="error-page">
    <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>
            {{ page_title }} - {{ application_environment == 'prod' ? application_title : application_environment|upper }}
        </title>

        <link type="image/png" rel="shortcut icon" href="/hal.ico">
        <link rel="stylesheet" href="/css/style.css?v={{ buster }}">
    </head>

    <body>
        <header role="banner">
            <div class="hal">
                <div class="wrapper">
                    <a href="/">
                        <div class="hal-eye circular">
                            <div class="ring circular"></div>
                            <div class="oculus circular">
                                <div class="iris circular narrow"></div>
                                <div class="iris circular wide"></div>
                                <div class="highlight alpha"></div>
                                <div class="highlight"></div>
                                <div class="highlight beta"></div>
                            </div>
                        </div>
                    </a>

                    <h1 class="hal-label">
                        <span class="hal-label__name">Hal</span>
                        <span class="hal-label__version">{{ application_version }}.0</span>
                    </h1>
                </div>
            </div>
        </header>

        <div class="terminal">
            <div class="terminal--border">
                <div class="terminal--border-inner">
                    <div class="terminal__screen">
                        <div class="terminal__return"><a href="javascript:history.go(-1);">BACK</a></div>
                        <div class="terminal__header">{{ status == 404 ? 'PAGE NOT FOUND' : 'MALFUNCTION DETECTED'}}</div>
                        <span class="terminal__entry"></span>
                    </div>
                </div>
            </div>

            <div class="terminal__footer">
                <div class="terminal__footer__inner">HAL 9000 SERIES TERMINAL</div>
            </div>

            <div class="terminal__text">
                {%- if isDebugMode() -%}
                        {{ throwable.getFile() ~ ':' ~ throwable.getLine() }}
                        {{ macros.extra(message, details) }}
                {%- else -%}
                    {{- macros.intro(severity) -}}
                {%- endif -%}
                {{- isSeriousBusinessMode() ? macros.nofunzone() : macros.terminal() -}}
            </div>
        </div>

        <div class="star-1"></div>
        <div class="star-2"></div>
        <div class="star-3"></div>

        <script src="/js/vendor.bundle.js?v={{ buster }}"></script>
        <script src="/js/app.js?v={{ buster }}"></script>
    </body>
</html>

{% macro intro(severity) %}
An error has occured.^1500
{% if severity %}

Error Type: {{ severity }}
{% endif %}
{% endmacro %}

{% macro extra(message, details) %}
{{ message }}
{% endmacro %}

{% macro nofunzone() %}

Please contact an administrator for further details.
{% endmacro %}

{% macro terminal() %}

I am sorry this happened to you, Dave.^1500

The 9000 series has a perfect operational record. It can only be attributable to human error.^1500 Please stay calm.^1500 Your activity has been logged and the proper authorities have been notified.
{% endmacro %}
