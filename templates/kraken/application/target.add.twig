{% extends 'base.kraken.twig' %}
{% import "partials/form/macros.twig" as form_macros %}

{% set page_title = "Assign Environment" %}

{% block content %}

    <h1>Assign Environment to <strong>{{ application.name }}</strong></h1>

    <h4>Application</h4>
    <p>{{ application.name }}</p>

    {{ block('assign_environment') }}

{% endblock %}

{% block assign_environment %}
    <div class="form-wrapper">
        {{ form_macros.formErrors(errors) }}

        <form action="" method="post">
            <ul class="form-fields">

                <li>
                    <label for="enc-env">Environment</label>
                    <ul class="radio-grid--form">
                        {% for env in environments %}
                            {% set isSelected = (env.id == form.env) %}
                            <li>
                                <input id="env-{{ env.id }}" type="radio" name="env" value="{{ env.id }}"{{ isSelected ? ' checked' : ''}}>
                                <label for="env-{{ env.id }}">{{ env.name }}</label>
                            </li>
                        {% endfor %}
                    </ul>
                </li>

                <li>
                    <label for="enc-key">
                        Encryption Key Identifier
                        <small class="additional">
                            Specify the identifier used to retrieve the encryption key from the encryption service.
                            Configuration data is encrypted with the key returned by this service.
                        </small>
                    </label>
                    <input type="text" name="key" id="enc-key" maxlength="200" required value="{{ form.key }}" class="text-input">
                </li>
            </ul>

            <ul class="button-list">
                <li><input class="btn btn--action" type="submit" value="Assign Environment"></li>
                <li class="button-list__fixed"><a class="btn btn--secondary" href="{{ urlFor('kraken.application', {application: application.id}) }}">Cancel</a></li>
            </ul>

        </form>
    </div>
{% endblock %}
