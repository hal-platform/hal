{% extends 'base.kraken.twig' %}
{% import "_partial/macros.twig" as macros %}

{% set page_title = "Confirm Removal of Configuration Schema" %}

{% block content %}
    <h1>{{ page_title }}</h1>

    <h4>Application</h4>
    <p>{{ application.name }}</p>

    <h2>Schema</h2>

    <h4>Property Key</h4>
    <p><code>{{ schema.key }}</code></p>

    <h4>Type</h4>
    <p>
        {{ schema.isSecure ? macros.icon('locked') : '' }}
        {{ schema|formatSchemaType }}
    </p>

    <h2>Environments</h2>
    {{ block('properties') }}

    <form action="" method="post" class="leader form-wrapper">

        <ul class="button-list">
            <li><input class="btn btn--destructive" type="submit" value="Remove property from schema"></li>
            <li class="button-list__fixed"><a class="btn btn--secondary" href="{{ urlFor('kraken.schema', {application: application.id}) }}">Cancel</a></li>
        </ul>

    </form>

{% endblock %}

{% block properties %}
    {% if properties %}
        <p class="additional">This property has values in the following environments.</p>
        <p><strong>Warning!</strong> Removal of this schema from the configuration will also remove this value from the following environments:</p>

        <ul class="list--bullet">
            {% for property in properties %}
                <li>
                    {{ property.environment.name }}
                    (<a href="{{ urlFor('kraken.property', {property: property.id}) }}">View Latest Configuration</a>)
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>This property has no values for any environment, and is safe to remove.</p>
    {% endif %}
{% endblock %}
