{% extends 'base.kraken.twig' %}
{% import "_partial-form/macros.twig" as form_macros %}

{% set page_title = "Add Environment" %}

{% block content %}
    <h1>{{ page_title }}</h1>

    <div class="form-wrapper">
        {{ form_macros.formErrors(errors) }}

        <form action="" method="post">
            <ul class="form-fields">
                <li>
                    <label for="env-name">Name</label>
                    <small class="additional">The name of the environment such as <b>test</b> or <b>prod</b>.</small>

                    <input type="text" name="name" id="env-name" maxlength="40" required value="{{ form.name }}" class="text-input t50">
                </li>
                <li>
                    <label for="env-server">Consul Server</label>
                    <small class="additional">
                        The consul server associated with this environment.
                        <br>Must be the full URL and begin with <code>http://</code> or <code>https://</code>.
                    </small>

                    <input type="text" name="server" id="env-server" maxlength="200" required value="{{ form.server }}" class="text-input">
                </li>
                <li>
                    <label for="env-token">Consul Token</label>
                    <small class="additional">Access token for consul. Optional.</small>

                    <input type="text" name="token" id="env-token" maxlength="200" value="{{ form.token }}" class="text-input" autocomplete="off">
                </li>
                <li>
                    <label>Is this a production environment?</label>

                    <ul class="radio-grid--form">
                        <li>
                            {% set isSelected = form.is_prod is sameas('true') ? true : false %}
                            <input id="env-is_prod-1" type="radio" name="is_prod" value="true"{{ isSelected ? ' checked' : '' }}>
                            <label for="env-is_prod-1">Yes</label>
                        </li>

                        <li>
                            {% set isSelected = form.is_prod is sameas('false') ? true : false %}
                            <input id="env-is_prod-0"  type="radio" name="is_prod" value="false"{{ isSelected ? ' checked' : '' }}>
                            <label for="env-is_prod-0">No</label>
                        </li>
                    </ul>
                </li>
            </ul>

            <ul class="button-list">
                <li><input class="btn btn--action" type="submit" value="Add Environment"></li>
                <li class="button-list__fixed"><a class="btn btn--secondary" href="{{ urlFor('kraken.environments') }}">Cancel</a></li>
            </ul>

        </form>
    </div>
{% endblock %}
