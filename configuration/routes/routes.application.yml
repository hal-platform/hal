parameters:
    routes.application:

        ################################################################################################################
        # REPOSITORY POOLS ROUTES
        ################################################################################################################

        pools:
            route: '/applications/:application/environments/:environment/pools'
            stack: ['middleware.login', 'middleware.requireEntity', 'pools.page']
            conditions:
                application: '%routes.regex.digit%'
                environment: '%routes.regex.digit%'

        deployment_view.add:
            route: '/applications/:application/environments/:environment/pools/add'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool.add', 'deployment_view.add.page']
            conditions:
                application: '%routes.regex.digit%'
                environment: '%routes.regex.digit%'

        deployment_view:
            route: '/deployment-views/:view'
            stack: ['middleware.login', 'middleware.requireEntity', 'deployment_view.page']
            conditions:
                view: '%routes.regex.guid%'

        deployment_view.edit:
            route: '/deployment-views/:view/edit'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'deployment_view.edit.page']
            conditions:
                view: '%routes.regex.guid%'

        deployment_view.remove.confirm:
            method: 'GET'
            route: '/deployment-views/:view/remove'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'delete.confirm.page']
            conditions:
                view: '%routes.regex.guid%'
        deployment_view.remove:
            method: 'POST'
            route: '/deployment-views/:view/remove'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'deployment_view.remove.handler']
            conditions:
                view: '%routes.regex.guid%'

        pool.add:
            route: '/deployment-views/:view/pools/add'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'pool.add.page']
            conditions:
                view: '%routes.regex.guid%'

        pool.edit:
            route: '/deployment-views/:view/pools/:pool/edit'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'pool.edit.page']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'

        pool.remove.confirm:
            method: 'GET'
            route: '/deployment-views/:view/pools/:pool/remove'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'delete.confirm.page']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'
        pool.remove:
            method: 'POST'
            route: '/deployment-views/:view/pools/:pool/remove'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'pool.remove.handler']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'

        pool.deployment.add:
            method: 'POST'
            route: '/deployment-views/:view/pools/:pool/add'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'pool.deployment.add.handler']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'

        pool.deployment.remove.confirm:
            method: 'GET'
            route: '/deployment-views/:view/pools/:pool/remove/:deployment'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'delete.confirm.page']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'
                deployment: '%routes.regex.digit%'
        pool.deployment.remove:
            method: 'POST'
            route: '/deployment-views/:view/pools/:pool/remove/:deployment'
            stack: ['middleware.login', 'middleware.requireEntity', 'middleware.pool', 'pool.deployment.remove.handler']
            conditions:
                view: '%routes.regex.guid%'
                pool: '%routes.regex.guid%'
                deployment: '%routes.regex.digit%'
