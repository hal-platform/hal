parameters:
    routes:

        ################################################################################################################
        # USER ROUTES
        ################################################################################################################

        user:
            method: 'GET'
            route: '/users/:user'
            stack: ['middleware.login', 'middleware.requireEntity', 'user.page']
            conditions: {user: '%routes.regex.digit%'}

        settings:
            method: 'GET'
            route: '/settings'
            stack: ['middleware.login', 'user.settings.page']

        settings.handler:
            method: 'POST'
            route: '/settings'
            stack: ['middleware.login', 'user.settings.handler']

        settings.favorite_applications.add.handler:
            method: ['POST']
            route: '/settings/favorite-applications/:application'
            stack: ['middleware.login', 'middleware.api.require_entity', 'api_internal.settings.favorite_applications.add']
            conditions: {application: '%routes.regex.digit%'}
        settings.favorite_applications.remove.handler:
            method: ['POST']
            route: '/settings/favorite-applications/:application/delete'
            stack: ['middleware.login', 'middleware.api.require_entity', 'api_internal.settings.favorite_applications.remove']
            conditions: {application: '%routes.regex.digit%'}

        users:
            method: 'GET'
            route: '/users'
            stack: ['middleware.login', 'users.page']

        user.disable:
            method: 'POST'
            route: '/users/:user/disable'
            stack: ['middleware.admin', 'middleware.requireEntity', 'user.disable.handler']

        user.enable:
            method: 'POST'
            route: '/users/:user/enable'
            stack: ['middleware.admin', 'middleware.requireEntity', 'user.enable.handler']

        ################################################################################################################
        # USER TOKEN MANAGEMENT ROUTES
        ################################################################################################################

        user.token.add:
            method: 'POST'
            route: '/users/:id/tokens'
            stack: ['middleware.login', 'user.token.add.handler']
            conditions: {id: '%routes.regex.digit%'}

        user.token.remove.confirm:
            method: 'GET'
            route: '/users/:id/tokens/:token/revoke'
            stack: ['middleware.login', 'delete.confirm.page']
            conditions:
                id: '%routes.regex.digit%'
                token: '%routes.regex.guid%'
        user.token.remove:
            method: 'POST'
            route: '/users/:id/tokens/:token/revoke'
            stack: ['middleware.login', 'user.token.remove.handler']
            conditions:
                id: '%routes.regex.digit%'
                token: '%routes.regex.guid%'

