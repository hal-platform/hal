services:
    dashboard.page:
        class: 'Hal\UI\Controllers\DashboardController'
        arguments:
            - '@dashboard.twig'
            - '@doctrine.em'
            - '@permissions'
            - '@clock'
    dashboard.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['dashboard.twig']]]

    ####################################################################################################################
    # SIGN-IN CONTROLLERS
    ####################################################################################################################

    signin.page:
        class: 'Hal\UI\Controllers\SignInController'
        arguments: ['@signin.twig', '@stats']
    signin.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['signin.twig']]]
    signin.middleware:
        class: 'Hal\UI\Controllers\SignInHandler'
        arguments:
            - '@ldap.auth'
            - '@doctrine.em'
            - '@uri'
            - '@doctrine.random'
    signout.page:
        class: 'Hal\UI\Controllers\SignOutController'
        arguments: ['@uri']

    ####################################################################################################################
    # HELP CONTROLLERS
    ####################################################################################################################

    latest_release.page:
        parent: 'static.controller'
        arguments: ['@latest_release.twig']
    latest_release.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['latest-release.twig']]]

    styleguide.page:
        parent: 'static.controller'
        arguments: ['@styleguide.twig']
    styleguide.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.html.twig']]]
    styleguide.icons.page:
        parent: 'static.controller'
        arguments: ['@styleguide.icons.twig']
    styleguide.icons.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.icons.html.twig']]]

    help.page:
        parent: 'static.controller'
        arguments: ['@help.twig']
    help.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/help.twig']]]

    help.deployment.page:
        parent: 'static.controller'
        arguments: ['@help.deployment.twig']
    help.deployment.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/deployment.twig']]]

    help.application_setup.page:
        parent: 'static.controller'
        arguments: ['@help.application_setup.twig']
    help.application_setup.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/application-setup.twig']]]

    help.github_permissions.page:
        parent: 'static.controller'
        arguments: ['@help.github_permissions.twig']
    help.github_permissions.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/github-permissions.twig']]]

    ############################################################################

    static.controller:
        class: 'Hal\UI\Controllers\StaticController'
