services:

    static.controller:
        class: 'Hal\UI\Controllers\StaticController'

    denied.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['denied.twig']]]

    delete.confirm.page:
        parent: 'static.controller'
        arguments: ['@delete.confirm.twig']
    delete.confirm.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['delete.confirm.twig']]]

    ############################################################################

    dashboard.page:
        class: 'Hal\UI\Controllers\DashboardController'
        arguments:
            - '@dashboard.twig'
            - '@doctrine.em'
            - '@permissions'
            - '@job_queue'
    dashboard.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['dashboard.twig']]]

    ####################################################################################################################
    # SIGN-IN CONTROLLERS
    ####################################################################################################################

    signin.page:
        class: 'Hal\UI\Controllers\SignInController'
        arguments: ['@signin.twig', '@stats']
    signin.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['signin.twig']]]
    signin.middleware:
        class: 'Hal\UI\Controllers\SignInHandler'
        arguments:
            - '@ldap.auth'
            - '@doctrine.em'
            - '@uri'
            - '@doctrine.random'
    signout.page:
        class: 'Hal\UI\Controllers\SignOutController'
        arguments: ['@uri']

    ####################################################################################################################
    # HELP CONTROLLERS
    ####################################################################################################################

    latest_release.page:
        parent: 'static.controller'
        arguments: ['@latest_release.twig']
    latest_release.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['latest-release.twig']]]

    styleguide.page:
        parent: 'static.controller'
        arguments: ['@styleguide.twig']
    styleguide.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.html.twig']]]
    styleguide.icons.page:
        parent: 'static.controller'
        arguments: ['@styleguide.icons.twig']
    styleguide.icons.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.icons.html.twig']]]

    help.page:
        parent: 'static.controller'
        arguments: ['@help.twig']
    help.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/help.twig']]]

    help.deployment.page:
        parent: 'static.controller'
        arguments: ['@help.deployment.twig']
    help.deployment.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/deployment.twig']]]

    help.application_setup.page:
        parent: 'static.controller'
        arguments: ['@help.application_setup.twig']
    help.application_setup.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/application-setup.twig']]]

    ####################################################################################################################
    # SERVER CONTROLLERS
    ####################################################################################################################

    servers.page:
        class: 'Hal\UI\Controllers\Server\ServersController'
        arguments: ['@servers.twig', '@doctrine.em']
    servers.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/servers.twig']]]

    server.page:
        class: 'Hal\UI\Controllers\Server\ServerController'
        arguments: ['@server.twig', '@doctrine.em']
    server.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.twig']]]

    server.add.page:
        class: 'Hal\UI\Controllers\Server\AddServerController'
        arguments:
            - '@server.add.twig'
            - '@doctrine.em'
            - '@server.validator'
            - '@uri'
    server.add.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.add.twig']]]

    server.edit.page:
        class: 'Hal\UI\Controllers\Server\EditServerController'
        arguments:
            - '@server.edit.twig'
            - '@doctrine.em'
            - '@server.validator'
            - '@uri'
    server.edit.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.edit.twig']]]
    server.validator:
        class: 'Hal\UI\Validator\ServerValidator'
        arguments: ['@doctrine.em']

    server.remove.handler:
        class: 'Hal\UI\Controllers\Server\RemoveServerController'
        arguments: ['@doctrine.em', '@uri']

    ####################################################################################################################
    # QUEUE CONTROLLERS
    ####################################################################################################################

    queue.page:
        class: 'Hal\UI\Controllers\QueueController'
        arguments: ['@queue.twig', '@job_queue']
    queue.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['queue.twig']]]

    queue.history.page:
        class: 'Hal\UI\Controllers\QueueHistoryController'
        arguments:
            - '@queue.history.twig'
            - '@job_queue'
            - '@clock'
            - '%date.timezone%'
    queue.history.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['queue.history.twig']]]

    ####################################################################################################################
    # APPLICATION CONTROLLERS
    ####################################################################################################################

    applications.page:
        class: 'Hal\UI\Controllers\Application\ApplicationsController'
        arguments: ['@applications.twig', '@doctrine.em']
    applications.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['application/applications.twig']]]

    application.page:
        class: 'Hal\UI\Controllers\Application\ApplicationController'
        arguments: ['@application.twig', '@doctrine.em']
    application.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['application/application.twig']]]

    application.add.page:
        class: 'Hal\UI\Controllers\Application\AddApplicationController'
        arguments:
            - '@application.add.twig'
            - '@doctrine.em'
            - '@github'
            - '@permissions'
            - '@uri'
            - '@doctrine.random'
            - '%github.site.baseurl%'
    application.add.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['application/application.add.twig']]]

    application.edit.page:
        class: 'Hal\UI\Controllers\Application\EditApplicationController'
        arguments:
            - '@application.edit.twig'
            - '@doctrine.em'
            - '@github'
            - '@uri'
            - '%github.site.baseurl%'
    application.edit.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['application/application.edit.twig']]]

    application.remove.handler:
        class: 'Hal\UI\Controllers\Application\RemoveApplicationController'
        arguments: ['@doctrine.em', '@uri']

    ####################################################################################################################
    # BUILD CONTROLLERS
    ####################################################################################################################

    builds.page:
        class: 'Hal\UI\Controllers\Build\BuildsController'
        arguments:
            - '@builds.twig'
            - '@doctrine.em'
            - '@notFoundHandler'
    builds.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['build/builds.twig']]]

    build.page:
        class: 'Hal\UI\Controllers\Build\BuildController'
        arguments:
            - '@build.twig'
            - '@service.event_logs'
            - '@doctrine.em'
    build.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['build/build.twig']]]

    build.start.page:
        class: 'Hal\UI\Controllers\Build\StartBuildController'
        arguments:
            - '@build.start.twig'
            - '@doctrine.em'
            - '@github'
            - '@sticky.environment'
    build.start.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['build/start.twig']]]

    build.start.handler:
        class: 'Hal\UI\Controllers\Build\StartBuildHandler'
        arguments:
            - '@doctrine.em'
            - '@build.start.validator'
            - '@push.start.validator'
            - '@sticky.environment'
            - '@uri'
    build.start.validator:
        class: 'Hal\UI\Validator\BuildValidator'
        arguments:
            - '@doctrine.em'
            - '@github'
            - '@permissions'
            - '@utility.id.generator'

    ####################################################################################################################
    # PUSH CONTROLLERS
    ####################################################################################################################

    pushes.page:
        class: 'Hal\UI\Controllers\Push\PushesController'
        arguments:
            - '@pushes.twig'
            - '@doctrine.em'
            - '@notFoundHandler'
    pushes.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['push/pushes.twig']]]

    push.page:
        class: 'Hal\UI\Controllers\Push\PushController'
        arguments: ['@push.twig', '@service.event_logs']
    push.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['push/push.twig']]]

    push.start.page:
        class: 'Hal\UI\Controllers\Push\StartPushController'
        arguments:
            - '@push.start.twig'
            - '@doctrine.em'
            - '@pools'
            - '@uri'
    push.start.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['push/start.twig']]]

    push.start.handler:
        class: 'Hal\UI\Controllers\Push\StartPushHandler'
        arguments:
            - '@doctrine.em'
            - '@push.start.validator'
            - '@sticky.environment'
            - '@uri'
    push.start.validator:
        class: 'Hal\UI\Validator\PushValidator'
        arguments:
            - '@doctrine.em'
            - '@permissions'
            - '@utility.id.generator'
            - '@doctrine.random'

    push.rollback.page:
        class: 'Hal\UI\Controllers\Push\RollbackController'
        arguments:
            - '@push.rollback.twig'
            - '@doctrine.em'
            - '@notFoundHandler'
    push.rollback.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['push/rollback.twig']]]

