services:

    static.controller:
        class: 'Hal\UI\Controllers\StaticController'

    denied.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['denied.twig']]]

    delete.confirm.page:
        parent: 'static.controller'
        arguments: ['@delete.confirm.twig']
    delete.confirm.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['delete.confirm.twig']]]

    ############################################################################

    dashboard.page:
        class: 'Hal\UI\Controllers\DashboardController'
        arguments:
            - '@dashboard.twig'
            - '@doctrine.em'
            - '@permissions'
            - '@job_queue'
    dashboard.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['dashboard.twig']]]

    ####################################################################################################################
    # SIGN-IN CONTROLLERS
    ####################################################################################################################

    signin.page:
        class: 'Hal\UI\Controllers\SignInController'
        arguments: ['@signin.twig', '@stats']
    signin.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['signin.twig']]]
    signin.middleware:
        class: 'Hal\UI\Controllers\SignInHandler'
        arguments:
            - '@ldap.auth'
            - '@doctrine.em'
            - '@uri'
            - '@doctrine.random'
    signout.page:
        class: 'Hal\UI\Controllers\SignOutController'
        arguments: ['@uri']

    ####################################################################################################################
    # HELP CONTROLLERS
    ####################################################################################################################

    latest_release.page:
        parent: 'static.controller'
        arguments: ['@latest_release.twig']
    latest_release.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['latest-release.twig']]]

    styleguide.page:
        parent: 'static.controller'
        arguments: ['@styleguide.twig']
    styleguide.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.html.twig']]]
    styleguide.icons.page:
        parent: 'static.controller'
        arguments: ['@styleguide.icons.twig']
    styleguide.icons.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['styleguide.icons.html.twig']]]

    help.page:
        parent: 'static.controller'
        arguments: ['@help.twig']
    help.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/help.twig']]]

    help.deployment.page:
        parent: 'static.controller'
        arguments: ['@help.deployment.twig']
    help.deployment.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/deployment.twig']]]

    help.application_setup.page:
        parent: 'static.controller'
        arguments: ['@help.application_setup.twig']
    help.application_setup.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['help/application-setup.twig']]]

    ####################################################################################################################
    # SERVER CONTROLLERS
    ####################################################################################################################

    servers.page:
        class: 'Hal\UI\Controllers\Server\ServersController'
        arguments: ['@servers.twig', '@doctrine.em']
    servers.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/servers.twig']]]

    server.page:
        class: 'Hal\UI\Controllers\Server\ServerController'
        arguments: ['@server.twig', '@doctrine.em']
    server.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.twig']]]

    server.add.page:
        class: 'Hal\UI\Controllers\Server\AddServerController'
        arguments:
            - '@server.add.twig'
            - '@doctrine.em'
            - '@server.validator'
            - '@uri'
    server.add.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.add.twig']]]

    server.remove.page:
        class: 'Hal\UI\Controllers\Server\RemoveServerController'
        arguments:
            - '@doctrine.em'
            - '@uri'

    server.edit.page:
        class: 'Hal\UI\Controllers\Server\EditServerController'
        arguments:
            - '@server.edit.twig'
            - '@doctrine.em'
            - '@server.validator'
            - '@uri'
    server.edit.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['server/server.edit.twig']]]

    server.validator:
        class: 'Hal\UI\Validator\ServerValidator'
        arguments: ['@doctrine.em']

    ####################################################################################################################
    # QUEUE CONTROLLERS
    ####################################################################################################################

    queue.page:
        class: 'Hal\UI\Controllers\QueueController'
        arguments: ['@queue.twig', '@job_queue']
    queue.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['queue.twig']]]

    queue.history.page:
        class: 'Hal\UI\Controllers\QueueHistoryController'
        arguments:
            - '@queue.history.twig'
            - '@job_queue'
            - '@clock'
            - '%date.timezone%'
    queue.history.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['queue.history.twig']]]
