services:
    ####################################################################################################################
    # ADMIN CONTROLLERS
    ####################################################################################################################

    admin.dashboard.page:
        class: 'QL\Hal\Controllers\Admin\DashboardController'
        arguments: [@admin.dashboard.twig, @slim.response]
    admin.dashboard.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/dashboard.twig']]]

    admin.server.status.page:
        class: 'QL\Hal\Controllers\Server\ServersController'
        arguments:
            - @admin.server.status.twig
            - @doctrine.em
            - @slim.response
    admin.server.status.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/server.status.twig']]]

    admin.server.status.handler:
        class: 'QL\Hal\Controllers\Admin\ServerStatusHandler'
        arguments:
            - @slim.response
            - @doctrine.em
            - @slim.route.parameters
            - %cli.user%
        calls:
            - ['setCache', [@cache]]
            - ['setCacheTTL', [%cache.server.ttl%]]

    admin.audit.logs.page:
        class: 'QL\Hal\Controllers\Admin\AuditLogsController'
        arguments:
            - @admin.audit.logs.twig
            - @doctrine.em
            - @slim.response
            - @slim.not.found
            - @slim.route.parameters
    admin.audit.logs.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/audit.logs.twig']]]

    ####################################################################################################################
    # PERMISSION CONTROLLERS
    ####################################################################################################################

    admin.permissions.page:
        class: 'QL\Hal\Controllers\Admin\PermissionsController'
        arguments:
            - @admin.permissions.twig
            - @currentUser
            - @doctrine.em
    admin.permissions.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/types.twig']]]

    admin.permissions.remove.page:
        class: 'QL\Hal\Controllers\Admin\RemovePermissionsController'
        arguments:
            - @admin.permissions.remove.twig
            - @currentUser
            - @hal.userType
            - @doctrine.em
            - @permissions.new
            - @session.flasher
    admin.permissions.remove.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/type.remove.twig']]]

    admin.permissions.remove.handler:
        class: 'QL\Hal\Controllers\Admin\RemovePermissionsHandler'
        arguments:
            - @currentUser
            - @hal.userType
            - @doctrine.em
            - @permissions.new
            - @session.flasher

    ####################################################################################################################
    # SUPER ADMIN CONTROLLERS
    ####################################################################################################################

    admin.super.page:
        class: 'QL\Hal\Controllers\Admin\Super\SuperController'
        arguments:
            - @admin.super.twig
            - @slim.response
            - %encryption.secret%
            - %session.encryption.secret%
            - @hal.pushfile
    admin.super.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/super.twig']]]

    admin.users.page:
        class: 'QL\Hal\Controllers\Admin\Super\UserManagementController'
        arguments:
            - @admin.users.twig
            - @ldap
            - @doctrine.em
            - @slim.request
            - @slim.response
    admin.users.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/users.management.twig']]]

    admin.caches.page:
        class: 'QL\Hal\Controllers\Admin\Super\CacheManagementController'
        arguments:
            - @admin.caches.twig
            - @redis
            - @slim.response
            - @root
    admin.caches.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/cache.management.twig']]]

    admin.caches.handler:
        class: 'QL\Hal\Controllers\Admin\Super\CacheManagementHandler'
        arguments:
            - @slim.request
            - @slim.response
            - @session
            - @url
            - @doctrine.config
            - @redis

    admin.message.page:
        class: 'QL\Hal\Controllers\Admin\Super\GlobalMessageController'
        arguments:
            - @admin.message.twig
            - @global.message
            - @session
            - @url.helper
            - @slim.request
            - @slim.response
    admin.message.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/global.message.twig']]]

    admin.dangerzone.page:
        class: 'QL\Hal\Controllers\Admin\Super\DangerzoneController'
        arguments:
            - @admin.dangerzone.twig
            - @slim.request
            - @slim.response
    admin.dangerzone.twig:
        parent: 'twig.template'
        calls: [['setTemplate', ['admin/dangerzone.cli.twig']]]
