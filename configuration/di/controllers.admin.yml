services:

    ####################################################################################################################
    # PERMISSION CONTROLLERS
    ####################################################################################################################

    admin.permissions.page:
        class: 'Hal\UI\Controllers\Admin\Permissions\PermissionsController'
        arguments:
            - '@admin.permissions.twig'
            - '@currentUser'
            - '@doctrine.em'
    admin.permissions.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/permissions.twig']]]

    admin.permissions.deployment.page:
        class: 'Hal\UI\Controllers\Admin\Permissions\DeploymentPermissionsController'
        arguments:
            - '@admin.permissions.deployment.twig'
            - '@currentUser'
            - '@doctrine.em'
    admin.permissions.deployment.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/deployments.twig']]]

    admin.permissions.remove.page:
        class: 'Hal\UI\Controllers\Admin\Permissions\RemovePermissionsController'
        arguments:
            - '@doctrine.em'
            - '@admin.permissions.remove.twig'
            - '@currentUser'
            - '@hal.userType'
            - '@permissions'
            - '@session.flasher'
    admin.permissions.remove.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/permission.remove.twig']]]

    admin.permissions.remove.handler:
        class: 'Hal\UI\Controllers\Admin\Permissions\RemovePermissionsHandler'
        arguments:
            - '@doctrine.em'
            - '@currentUser'
            - '@hal.userType'
            - '@permissions'
            - '@session.flasher'

    admin.permissions.add.page:
        class: 'Hal\UI\Controllers\Admin\Permissions\AddPermissionsController'
        arguments:
            - '@slim.request'
            - '@admin.permissions.add.twig'
            - '@currentUser'
            - '@hal.user'
            - '@doctrine.em'
            - '@permissions'
            - '@json'
            - '@session.flasher'
            - '@doctrine.random'
        calls:
            - ['setCache', ['@cache']]
            - ['setCacheTTL', ['%cache.page.ttl%']]
    admin.permissions.add.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/permission.add.twig']]]

    admin.permissions.deployment.remove.page:
        class: 'Hal\UI\Controllers\Admin\Permissions\RemoveDeploymentPermissionsController'
        arguments:
            - '@admin.permissions.deployment.remove.twig'
            - '@hal.userPermission'
            - '@permissions'
    admin.permissions.deployment.remove.twig:
        parent: 'twig.auto.template'
        calls: [['setTemplate', ['admin/permissions/deployment.remove.twig']]]

    admin.permissions.deployment.remove.handler:
        class: 'Hal\UI\Controllers\Admin\Permissions\RemoveDeploymentPermissionsHandler'
        arguments:
            - '@hal.userPermission'
            - '@permissions'
            - '@session.flasher'

    admin.permissions.refresh.handler:
        class: 'Hal\UI\Controllers\Admin\Permissions\RefreshUserPermissionsController'
        arguments:
            - '@hal.user'
            - '@permissions'
            - '@session.flasher'
