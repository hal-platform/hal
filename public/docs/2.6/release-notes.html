<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="/docs/release-notes.css">
</head>
<body>
    <h1>HAL 9000 - Version 2.6</h1>
    <p>Greetings! The web core team has deployed an update to HAL 9000. This is version 2.6.</p>

    <h3>What is HAL 9000?</h3>
    <p>HAL 9000 is the deployment system we use to deploy many of our client-facing websites, including MyQL, Rocket Mortgage, QLMS, ORMS, Agent Insight, QuickenLoans.com and more!</p>

    <h3>New Features</h3>
    <ul>
        <li>
            <h5>Kraken Runtime Configuration has been added.</h5>

            <blockquote>
                <p>This is the first release of Kraken, but cannot yet be used in production as the QKS Encryption service is not finished.</p>
                <h4>What is Kraken?</h4>
                <ul>
                    <li>
                        Kraken allows application owners to set <b>runtime configuration</b>. This configuration consists of properties that can be modified and deployed
                        through the HAL 9000 interface, rather than requiring a new code deployment.
                    </li>

                    <li>Kraken is available at <a href="/kraken"><i>/kraken</i></a> and can be enabled on your navigation menu through your <i>settings</i>.</li>
                </ul>

                <h4>What kind of data can be stored in Kraken?</h4>
                <ul>
                    <li>Cache servers</li>
                    <li>Feature flags to disable parts of application (dark launching)</li>
                    <li>Logging settings</li>
                    <li>Sensitive configuration that should be encrypted at rest (database passwords, api keys)</li>
                </ul>

                <p>Please see the <a href="/kraken/help"><i>Kraken Help</i></a> page for more information.</p>
            </blockquote>
        </li>

        <li>
            <h5>HAL now uses a dedicated user authorization system.</h5>

            <blockquote>
                <p>Active directory is no longer used for permissions. Permissions are now managed directory within HAL 9000 by administrators.</p>
                <h4>This results in several new features:</h4>
                <ul>
                    <li>Much faster page load times. Active Directory permission checks slowed down most core pages.</li>
                    <li>Any user can be made an <b>Application lead</b>, giving non-administrators access to manage an Application's Properties, Deployments, and Kraken Schema.</li>
                    <li>Any user can be given non-prod or prod deployment permissions.</li>
                </ul>

                <h4>The following user types are available:</h4>
                <ul>
                    <li><b>Standard</b> - deployment permissions determined by GHE organization membership.</li>
                    <li><b>Deployment</b> - was granted deployment permissions for a specific application to either non-prod or prod environments.</li>
                    <li><b>Lead</b> - can manage a specific applications settings, deployments, encrypted properties, kraken schema and deploy to non-prod.</li>
                    <li><b>Admin</b> - can manage all applications, and deploy to all environments.</li>
                    <li><b>HAL Admin</b> - can manage all applications, and deploy to non-prod.</li>
                </ul>

            </blockquote>
        </li>

    </ul>

    <h2>Changelog</h2>

    <h3>User Experience (UX) Enhancements</h3>
    <ul>
        <li>
            <h5>The <a href="/queue-history"><i>Queue History</i></a> page is now available to all users.</h5>

            <blockquote>
                <p>The page shows all builds and pushes for a specific day. It is available at <a href="/queue-history">/queue-history</a> and is linked from the <i>Queue</i></p>
            </blockquote>
        </li>
        <li>
            <h5>HAL 9000 is much faster.</h5>

            <blockquote>
                <p>Turbo mode is now engaged.</p>
            </blockquote>
        </li>
        <li>
            <h5>Improved relative time to not be completely useless for times older than 1 week.</h5>
        </li>
        <li>
            <h5>Added job duration for builds and pushes.</h5>
        </li>
        <li>
            <h5><i>Repositories</i> are now referred to as the more accurate nomenclature: <i>Applications</i></h5>
        </li>
    </ul>

    <h3>Bugs</h3>
    <ul>
        <li>
            <h5>On the <i>Start Build</i> page, the selected ref to build will no longer be deselected on a submission error or page reload.</h5>
        </li>
    </ul>

    <h3>Changes</h3>

    <ul>
        <li>
            <h5>
                For HAL Administrators, a <i>System Status</i> page was added and replaces the previous <i>Global Server Status</i>. This page reports heartbeats and connection tests reported by the agents.
            </h5>
        </li>
    </ul>

    <h3>API Changes</h3>
    <ul>
        <li>
            <h5>Repository</h5>

            <blockquote>
                <ul>
                    <li>The <b>Repository</b> resource type has been changed to <b>Application</b>.</li>
                </ul>
            </blockquote>
        </li>

        <li>
            <h5>User</h5>

            <blockquote>
                <ul>
                    <li>
                        <code>isActive</code> added.
                    </li>
                    <li>
                        <code>permissions</code> added.
                    </li>
                </ul>
            </blockquote>
        </li>
    </ul>

    <h3>Technical</h3>
    <ul>
        <li>
            <h5>All ruby dependencies have been removed.</h5>
        </li>
        <li>
            <h5>HAL now uses Nodesass, Webpack and Scales CSS 2.0.</h5>
        </li>
        <li>
            <h5>HAL now requires PHP 5.6 to build and deploy.</h5>
        </li>
        <li>
            <h5>Builds are now separated into <code>YYYY-MM</code> directories for easier maintenance.</h5>
        </li>
        <li>
            <h5>Dependencies</h5>

            <blockquote>
                <h4>The following components MUST go with this release:</h4>
                <ul>
                    <li>HAL 2.6</li>
                    <li>HAL Core 2.7</li>
                    <li>HAL Agent 2.4</li>
                </ul>
            </blockquote>
        </li>
    </ul>

    <h2>Need Help?</h2>
    <p>If you find any bugs or want to request a feature, drop us a line in the hipchat room <strong>[Application] HAL 9000</strong>, or <a href="mailto:itteamwebcore@quickenloans.com">send us an email</a>.</p>

    <h2>JIRA Tasklist</h2>

    <p>
        <a href="https://fringedivision.atlassian.net/projects/HAL/versions/12504">JIRA Release page for HAL 9000 2.6</a>
    </p>

    <h3>Bug</h3>
    <ul class="task-list">
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-184">HAL-184</a>] - Fix broken route conditions in routes configuration</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-188">HAL-188</a>] - Fix ref box not being selected on build page</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-202">HAL-202</a>] - Require PHP 5.6.6, and fix float parsing when encoding json</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-216">HAL-216</a>] - Prevent values larger than 20k from being stored</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-254">HAL-254</a>] - Hal is not handling or logging fatal errors.</li>
    </ul>

    <h3>Improvement</h3>
    <ul class="task-list">
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-67">HAL-67</a>] - Refactor PermissionsService</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-78">HAL-78</a>] - Switch from requirejs to webpack</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-185">HAL-185</a>] - Remove aws noise from ajax add deployments</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-186">HAL-186</a>] - Update to doctrine 2.5</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-203">HAL-203</a>] - Clean up Kraken UX</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-217">HAL-217</a>] - Allow values to be multline (textarea)</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-239">HAL-239</a>] - Add isProd flag to Hal environments</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-240">HAL-240</a>] - Switch kraken permission to use new permission system</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-241">HAL-241</a>] - Switch HAL permissions to use new permission system</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-247">HAL-247</a>] - Add ability to enable/disable users from frontend</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-248">HAL-248</a>] - Determine and configure second level cache settings</li>
    </ul>

    <h3>New Feature</h3>
    <ul class="task-list">
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-133">HAL-133</a>] - Add internal db/store for permissions</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-190">HAL-190</a>] - Add ability to link Kraken Application to HAL repository</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-191">HAL-191</a>] - Encrypt secure kraken values when stored in database.</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-192">HAL-192</a>] - Add deployed configuration history</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-193">HAL-193</a>] - Port to Scales 2</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-194">HAL-194</a>] - Add permission management for consul/hal</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-195">HAL-195</a>] - Define database schema for isolated config tables</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-196">HAL-196</a>] - Build Kraken MVP within hal</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-207">HAL-207</a>] - Add configuration rollbacks</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-208">HAL-208</a>] - Add history for individual properties</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-209">HAL-209</a>] - Add ability to compare configurations</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-210">HAL-210</a>] - Update consul adapter to write each property individually</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-212">HAL-212</a>] - Add ability to update and remove config property</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-213">HAL-213</a>] - Add ability to update/remove schema</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-214">HAL-214</a>] - Add audit logs for Kraken</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-215">HAL-215</a>] - Add user prop to auditable kraken resources</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-223">HAL-223</a>] - Add "job time" on build info, push info pages</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-228">HAL-228</a>] - Update superadmin panel to read new redis status data</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-235">HAL-235</a>] - Add tooltips from primercss.io</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-236">HAL-236</a>] - Display consul audit data on configuration page</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-238">HAL-238</a>] - Add ability to prime schema for skeletor projects</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-249">HAL-249</a>] - Add help, faq pages and documentation for Kraken</li>
    </ul>

    <h3>Task</h3>
    <ul class="task-list">
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-206">HAL-206</a>] - Perform browser QA</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-211">HAL-211</a>] - Fix button lists and page headers</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-243">HAL-243</a>] - Add ability to force a user's permissions to cache clear</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-244">HAL-244</a>] - Write migration for kraken schema to hal db</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-245">HAL-245</a>] - Update agent to use new core package</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-246">HAL-246</a>] - Convert ldap permissions to hal permissions</li>
        <li>[<a href="https://fringedivision.atlassian.net/browse/HAL-253">HAL-253</a>] - Update Kraken documentation</li>
    </ul>
</body>
</html>
