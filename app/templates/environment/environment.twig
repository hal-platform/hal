{% extends 'base.html.twig' %}

{% set page_title = 'Environment: '~env.key %}

{% block content %}
    <h2><strong>{{ env.key }}</strong> environment</h2>

    <h3>Servers</h3>
    <ul>
        {% for server in servers %}
            <li><a href="{{ urlFor('server', {'id': server.id}) }}">{{ server.name }}</a></li>
        {% else %}
            <li>There are no servers associated with this environment.</li>
        {% endfor %}
    </ul>

    {% if isAdmin and servers %}
        <p><strong>Note:</strong> All associated servers must be removed or transferred to remove this environment.</p>
    {% endif %}

    <div>
        {# primary action #}
        <a class="btn" href="{{ urlFor('environments') }}">View all environments</a>

        {% if isAdmin %}
            {# secondary actions #}
            <a class="btn--action secondary-action" href="{{ urlFor('environment.admin.edit', {id: env.id}) }}">Edit</a>
            {% if not servers  and canUserDelete(currentUser) %}
                <form class="secondary-action" action="{{ urlFor('environment.admin.remove.handle', {id: env.id}) }}" method="post">
                    <input class="btn--destructive" type="submit" value="Remove">
                </form>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}
