{% extends 'base.html.twig' %}

{% set page_title = 'Hello, '~getUsersActualName(user)~'.' %}

{% block content %}

    <h2>Hello, {{ getUsersActualName(user) }}.</h2>

    {# QUICK BUILD #}

    <button class="btn trailer js-hide-btn">Start a Build</button>
    <div class="js-hide-box">
        <h3>Choose a Repository</h3>
        <div class="form-wrapper">
            <form action="" method="post">
                <ul class="form-fields">
                    <li>
                        <label for="search">Filter Repositories</label>
                        <input class="text-input js-filter__input" type="text" id="search" name="search" autofocus>
                    </li>
                </ul>
            </form>
        </div>
        <div class="col-list">
            <ul class="list--bare js-filter">
                {% for repository in repositories %}
                    <li><a href="{{ urlFor('build.start', {'id': repository.id}) }}">{{ repository.key }}</a></li>
                {% else %}
                    <li>Looks like you don't have access to anything.</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    {# PENDING WORK #}
    {% if isAdmin and pending %}
      <h3>Pending Agent Work</h3>
      {% include 'partials/pending-table.twig' %} 
    {% endif %}


    <div class="dash-box-wrapper">

        <div class="dash-box">
              {# RECENT USER BUILD ACTIVITY #}

              <h3>Your Recent Builds</h3>
              {% include 'partials/build-box.twig' with {'builds': builds, 'initiator': false} %}
        </div>

        <div class="dash-box">
              {# RECENT USER PUSH ACTIVITY #}

              <h3>Your Recent Pushes</h3>
              {% include 'partials/push-box.twig' with {'builds': builds, 'initiator': false} %}
        </div>
    </div>

{% endblock %}
