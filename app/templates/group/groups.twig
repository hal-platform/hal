{% extends 'base.html.twig' %}

{% set page_title = "Groups" %}

{% block content %}
    <h2>Repository Groups</h2>

    <p>
        Repositories are organized into groups, commonly a team name or business unit. Select a group below
        to view the member repositories and to push code if you have permission.
    </p>

    <table class="tablesaw tablesaw-stack" data-mode="stack">
        <thead>
            <tr>
                <th>Group</th>
                <th>Repositories</th>
            </tr>
        </thead>
        <tbody>
        {% for group in groups %}
            <tr>
                <td>
                    <a href="{{ urlFor('group', {'id': group.id}) }}">{{ group.name }}</a>
                </td>

                <td>
                    {% if not group.repositories.isEmpty %}
                        <ul class="inline-list--comma">
                            {% for repo in group.repositories %}
                                <li><a href="{{ urlFor('repository.status', {'id': repo.id}) }}">{{ repo.key }}</a></li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        This group has no repositories.
                    {% endif %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="2">There are no groups.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div>
        {# primary action #}
        {% if isAdmin %}
            <a class="btn" href="{{ urlFor('group.admin.add') }}">Add Group</a>
        {% endif %}
    </div>
{% endblock %}
