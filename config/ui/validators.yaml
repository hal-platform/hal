services:
    validator.organization:
        class: 'Hal\UI\Validator\OrganizationValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'

    validator.environment:
        class: 'Hal\UI\Validator\EnvironmentValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'

    validator.application:
        class: 'Hal\UI\Validator\ApplicationValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@Hal\Core\VersionControl\VCSFactory'

    validator.credential:
        class: 'Hal\UI\Validator\CredentialValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@Hal\Core\Crypto\Encryption'

    validator.encrypted_property:
        class: 'Hal\UI\Validator\EncryptedPropertyValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@Hal\Core\Crypto\Encryption'

    validator.permissions:
        class: 'Hal\UI\Validator\PermissionsValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'

    validator.build:
        class: 'Hal\UI\Validator\BuildValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@Hal\Core\VersionControl\VCSFactory'
            - '@Hal\UI\Security\AuthorizationService'
    validator.release:
        class: 'Hal\UI\Validator\ReleaseValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@Hal\UI\Security\AuthorizationService'

    validator.target:
        class: 'Hal\UI\Validator\TargetValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            -
                cd: '@validator.target.cd'
                eb: '@validator.target.eb'
                rsync: '@validator.target.rsync'
                s3: '@validator.target.s3'
                script: '@validator.target.script'

    validator.target.cd:
        class: 'Hal\UI\Validator\Targets\CodeDeployValidator'
        arguments:
            - '@validator.target.s3'

    validator.target.eb:
        class: 'Hal\UI\Validator\Targets\ElasticBeanstalkValidator'
        arguments:
            - '@validator.target.s3'

    validator.target.rsync:
        class: 'Hal\UI\Validator\Targets\RSyncValidator'

    validator.target.s3:
        class: 'Hal\UI\Validator\Targets\S3Validator'

    validator.target.script:
        class: 'Hal\UI\Validator\Targets\ScriptValidator'

    validator.meta:
        class: 'Hal\UI\Validator\MetaValidator'

    ####################################################################################################################

    validator.template:
        class: 'Hal\UI\Validator\TargetTemplateValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            -
                cd: '@validator.template.cd'
                eb: '@validator.template.eb'
                rsync: '@validator.template.rsync'
                s3: '@validator.template.s3'
                script: '@validator.template.script'

    validator.template.cd:
        class: 'Hal\UI\Validator\Targets\CodeDeployValidator'
        arguments:
            - '@validator.template.s3'
        calls:
            - ['withFlag', ['ALLOW_OPTIONAL']]

    validator.template.eb:
        class: 'Hal\UI\Validator\Targets\ElasticBeanstalkValidator'
        arguments:
            - '@validator.template.s3'
        calls:
            - ['withFlag', ['ALLOW_OPTIONAL']]

    validator.template.rsync:
        class: 'Hal\UI\Validator\Targets\RSyncValidator'
        calls:
            - ['withFlag', ['ALLOW_OPTIONAL']]

    validator.template.s3:
        class: 'Hal\UI\Validator\Targets\S3Validator'
        calls:
            - ['withFlag', ['ALLOW_OPTIONAL']]

    validator.template.script:
        class: 'Hal\UI\Validator\Targets\ScriptValidator'
        calls:
            - ['withFlag', ['ALLOW_OPTIONAL']]

    ####################################################################################################################

    validator.user:
        class: 'Hal\UI\Validator\UserValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'

    validator.user_identity:
        class: 'Hal\UI\Validator\UserIdentityValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            - '@clock'

    ####################################################################################################################

    validator.vcs:
        class: 'Hal\UI\Validator\VersionControlProviderValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            -
                ghe: '@validator.vcs.ghe'

    validator.vcs.ghe:
        class: 'Hal\UI\Validator\VersionControl\GitHubEnterpriseValidator'

    ####################################################################################################################

    validator.idp:
        class: 'Hal\UI\Validator\UserIdentityProviderValidator'
        arguments:
            - '@Doctrine\ORM\EntityManagerInterface'
            -
                gh: '@validator.idp.gh'
                ghe: '@validator.idp.ghe'
                ldap: '@validator.idp.ldap'
                internal: '@validator.idp.internal'

    validator.idp.gh:
        class: 'Hal\UI\Validator\IdentityProviders\GitHubValidator'

    validator.idp.ghe:
        class: 'Hal\UI\Validator\IdentityProviders\GitHubEnterpriseValidator'

    validator.idp.ldap:
        class: 'Hal\UI\Validator\IdentityProviders\LDAPValidator'

    validator.idp.internal:
        class: 'Hal\UI\Validator\IdentityProviders\InternalValidator'
